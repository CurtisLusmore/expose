(this.webpackJsonpexpose=this.webpackJsonpexpose||[]).push([[0],{73:function(t,e,a){},80:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),o=a(10),r=a.n(o),i=(a(73),a(42)),s=a(15),m=a(30),u=a(24),d=a(117),l=a(122),j=a(112),b=a(6),f=Object(j.a)((function(t){return{root:{width:"100%","& > *":{margin:t.spacing(1)},"& .MuiTextField-root":{width:"100%"}}}}));function h(t){var e=t.addLocation,a=window.localStorage.getItem("expose_form"),n=a?JSON.parse(a):{name:"",mode:"checkin"},o=c.a.useState(n),r=Object(m.a)(o,2),i=r[0],s=r[1];function j(t){"function"===typeof t&&(t=t(i)),window.localStorage.setItem("expose_form",JSON.stringify(t)),s(t)}var h=f();switch(i.mode){case"checkin":return Object(b.jsxs)("form",{className:h.root,onSubmit:function(t){return t.preventDefault(),e(i.name,"checkin"),j((function(t){return Object(u.a)(Object(u.a)({},t),{},{mode:"checkout"})})),!1},children:[Object(b.jsx)(l.a,{required:!0,label:"Location Name",name:"name",value:i.name,onChange:function(t){j((function(e){return Object(u.a)(Object(u.a)({},e),{},{name:t.target.value})}))}}),Object(b.jsx)(d.a,{variant:"contained",color:"primary",type:"submit",children:"Check In"})]});case"checkout":return Object(b.jsxs)("form",{className:h.root,onSubmit:function(t){return t.preventDefault(),e(i.name,"checkout"),j((function(t){return Object(u.a)(Object(u.a)({},t),{},{name:"",mode:"checkin"})})),!1},children:[Object(b.jsx)(l.a,{required:!0,label:"Location Name",name:"name",value:i.name,disabled:!0}),Object(b.jsx)(d.a,{variant:"contained",color:"primary",type:"submit",children:"Check Out"})]});default:throw new Error("Unknown mode ".concat(i.mode))}}var p=a(120),O=a(116),g=a(118),x=a(119),v=a(121),w=a(48),S=a(36),y=a.n(S),N=Object(j.a)((function(t){return{root:{width:"100%"},dividerFullWidth:{margin:"5px 0 0 ".concat(t.spacing(2),"px")}}}));function k(t){var e=t.name,a=t.timestamps,n=t.locations;return Object(b.jsx)(g.a,{children:Object(b.jsx)(x.a,{primary:function(t,e){if(1===e.length){var a=e[0],n=a.latitude,c=a.longitude;return Object(b.jsx)("a",{href:"https://www.google.com/maps/search/".concat(n,",").concat(c,"/@").concat(n,",").concat(c,",17z"),children:t})}var o=Object(m.a)(e,2),r=o[0],i=r.latitude,s=r.longitude,u=o[1],d=u.latitude,l=u.longitude;return Object(b.jsx)("a",{href:"https://www.google.com/maps/dir///@".concat(d,",").concat(l,",17z/data=!3m1!4b1!4m10!4m9!1m3!2m2!1d").concat(s,"!2d").concat(i,"!1m3!2m2!1d").concat(l,"!2d").concat(d,"!3e2"),children:t})}(e,n),secondary:function(t){return 1===t.length?y()(t[0]).format("hh:mmA"):y()(t[0]).format("hh:mmA")+" - "+y()(t[1]).format("hh:mmA")}(a)})},a[0])}function I(t){var e=t.history.reduce((function(t,e){var a=Object(i.a)(t),n=a[0],c=a.slice(1),o=y()(e.timestamps[0]).format("DD/MM/YYYY");return void 0===n?[{date:o,items:[e]}]:n.date!==o?[].concat(Object(s.a)(c),[n,{date:o,items:[e]}]):[].concat(Object(s.a)(c),[{date:o,items:[].concat(Object(s.a)(n.items),[e])}])}),[]),a=N();return Object(b.jsx)(O.a,{className:a.root,subheader:Object(b.jsx)(v.a,{component:"div",children:"Location History"}),children:e.map((function(t){var e=t.date,n=t.items;return Object(b.jsxs)("span",{children:[Object(b.jsx)(p.a,{component:"li"},"divider-".concat(e)),Object(b.jsx)("li",{children:Object(b.jsx)(w.a,{className:a.dividerFullWidth,color:"textSecondary",display:"block",variant:"caption",children:e})},"subhead-".concat(e)),n.map(k)]},"span-".concat(e))}))})}var J=a(57),D=a.n(J),F=a(58),C=a.n(F),_=Object(j.a)((function(t){return{button:{margin:t.spacing(1)}}}));function L(t){var e=_(),a=btoa(JSON.stringify({form:JSON.parse(window.localStorage.getItem("expose_form")),items:JSON.parse(window.localStorage.getItem("expose_items"))}));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.a,{className:e.button,variant:"contained",color:"primary",startIcon:Object(b.jsx)(D.a,{}),href:"data:application/octet-stream;charset=utf-8;base64,".concat(a),download:"expose.json",children:"Download Data"}),Object(b.jsxs)(d.a,{className:e.button,variant:"contained",color:"primary",startIcon:Object(b.jsx)(C.a,{}),component:"label",children:["Upload Data",Object(b.jsx)("input",{type:"file",accept:".json",hidden:!0,onChange:function(t){var e=new FileReader;e.readAsText(t.target.files[0],"utf-8"),e.onload=function(t){var e=JSON.parse(t.target.result),a=e.form,n=e.items;window.localStorage.setItem("expose_form",JSON.stringify(a)),window.localStorage.setItem("expose_items",JSON.stringify(n)),window.location.reload()}}})]})]})}var A=Object(j.a)((function(t){return{root:{width:"90%",margin:"10px auto 10px auto"}}}));var T=function(){var t=window.localStorage.getItem("expose_items"),e=t?JSON.parse(t):[],a=c.a.useState(e),n=Object(m.a)(a,2),o=n[0],r=n[1];function u(t){"function"===typeof t&&(t=t(o)),window.localStorage.setItem("expose_items",JSON.stringify(t)),r(t)}var d=A();return Object(b.jsxs)("div",{className:d.root,children:[Object(b.jsx)(h,{addLocation:function(t,e){var a=(new Date).getTime();navigator.geolocation.getCurrentPosition((function(n){var c=n.coords,o={latitude:c.latitude,longitude:c.longitude};switch(e){case"checkin":u((function(e){return[{name:t,timestamps:[a],locations:[o]}].concat(Object(s.a)(e))}));break;case"checkout":u((function(e){var n=Object(i.a)(e),c=n[0],r=n.slice(1);return[{name:t,timestamps:[].concat(Object(s.a)(c.timestamps),[a]),locations:[].concat(Object(s.a)(c.locations),[o])}].concat(Object(s.a)(r))}))}}),(function(){}),{maximumAge:0,enableHighAccuracy:!0})}}),Object(b.jsx)(I,{history:o}),Object(b.jsx)(L,{})]})},M=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,124)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,o=e.getLCP,r=e.getTTFB;a(t),n(t),c(t),o(t),r(t)}))};r.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(T,{})}),document.getElementById("root")),M()}},[[80,1,2]]]);
//# sourceMappingURL=main.108faed0.chunk.js.map
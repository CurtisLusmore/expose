{"version":3,"sources":["CheckInForm.jsx","HistoryList.jsx","StateManagement.jsx","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","theme","root","width","margin","spacing","CheckInForm","addLocation","initialStateString","window","localStorage","getItem","initialState","JSON","parse","name","mode","React","useState","state","_setState","setState","newState","setItem","stringify","classes","className","onSubmit","ev","preventDefault","TextField","required","label","value","onChange","target","Button","variant","color","type","disabled","Error","dividerFullWidth","CheckInEntry","timestamps","locations","ListItem","ListItemText","primary","length","latitude","longitude","href","latitude1","longitude1","latitude2","longitude2","locationLink","secondary","time1","moment","format","time2","timeString","HistoryList","days","history","reduce","full","curr","date","prev","rest","slice","undefined","items","List","subheader","ListSubheader","component","map","Divider","Typography","display","button","StateManagement","props","data","btoa","form","startIcon","download","accept","hidden","reader","FileReader","readAsText","files","onload","re","result","location","reload","App","timestamp","Date","getTime","navigator","geolocation","getCurrentPosition","coords","maximumAge","enableHighAccuracy","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"4OAKMA,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,MAAO,OACP,QAAS,CACPC,OAAQH,EAAMI,QAAQ,IAExB,uBAAwB,CACtBF,MAAO,aAKE,SAASG,EAAT,GAAuC,IAAhBC,EAAe,EAAfA,YAC9BC,EAAqBC,OAAOC,aAAaC,QAAQ,eACjDC,EAAeJ,EACjBK,KAAKC,MAAMN,GACX,CAAEO,KAAM,GAAIC,KAAM,WAEtB,EAA2BC,IAAMC,SAASN,GAA1C,mBAAOO,EAAP,KAAcC,EAAd,KAEA,SAASC,EAASC,GACS,oBAAdA,IACTA,EAAWA,EAASH,IAEtBV,OAAOC,aAAaa,QAAQ,cAAeV,KAAKW,UAAUF,IAC1DF,EAAUE,GAqBZ,IAAMG,EAAU1B,IAEhB,OAAQoB,EAAMH,MACZ,IAAK,UACH,OAAO,uBAAMU,UAAWD,EAAQvB,KAAMyB,SAlB1C,SAAiBC,GAIf,OAHAA,EAAGC,iBACHtB,EAAYY,EAAMJ,KAAM,WACxBM,GAAS,SAAAF,GAAK,kCAAUA,GAAV,IAAiBH,KAAM,iBAC9B,GAcE,UACL,cAACc,EAAA,EAAD,CACEC,UAAQ,EACRC,MAAM,gBACNjB,KAAK,OACLkB,MAAOd,EAAMJ,KACbmB,SA5BR,SAAoBN,GAClBP,GAAS,SAAAF,GAAK,kCAAUA,GAAV,IAAiBJ,KAAMa,EAAGO,OAAOF,cA6B3C,cAACG,EAAA,EAAD,CACEC,QAAQ,YACRC,MAAM,UACNC,KAAK,SAHP,yBAQJ,IAAK,WACH,OAAO,uBAAMb,UAAWD,EAAQvB,KAAMyB,SA5B1C,SAAkBC,GAIhB,OAHAA,EAAGC,iBACHtB,EAAYY,EAAMJ,KAAM,YACxBM,GAAS,SAAAF,GAAK,kCAAUA,GAAV,IAAiBJ,KAAM,GAAIC,KAAM,gBACxC,GAwBE,UACL,cAACc,EAAA,EAAD,CACEC,UAAQ,EACRC,MAAM,gBACNjB,KAAK,OACLkB,MAAOd,EAAMJ,KACbyB,UAAU,IAEZ,cAACJ,EAAA,EAAD,CACEC,QAAQ,YACRC,MAAM,UACNC,KAAK,SAHP,0BAQJ,QACE,MAAM,IAAIE,MAAJ,uBAA0BtB,EAAMH,Q,0EC/EtCjB,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,MAAO,QAETuC,iBAAkB,CAChBtC,OAAO,WAAD,OAAaH,EAAMI,QAAQ,GAA3B,WAMV,SAASsC,EAAT,GAAwD,IAAhC5B,EAA+B,EAA/BA,KAAM6B,EAAyB,EAAzBA,WAAYC,EAAa,EAAbA,UA4BxC,OAAO,cAACC,EAAA,EAAD,UACL,cAACC,EAAA,EAAD,CAAcC,QAfhB,SAAsBjC,EAAM8B,GAC1B,GAAyB,IAArBA,EAAUI,OAAc,CAC1B,MAAgCJ,EAAU,GAAlCK,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,UAClB,OAAO,mBAAGC,KAAI,6CAAwCF,EAAxC,YAAoDC,EAApD,aAAkED,EAAlE,YAA8EC,EAA9E,QAAP,SAAuGpC,IAG9G,kBAGI8B,EAHJ,UACcQ,EADd,EACIH,SAAgCI,EADpC,EACyBH,UADzB,OAEcI,EAFd,EAEIL,SAAgCM,EAFpC,EAEyBL,UAEzB,OAAO,mBAAGC,KAAI,6CAAwCG,EAAxC,YAAqDC,EAArD,iDAAwGF,EAAxG,cAAwHD,EAAxH,sBAA+IG,EAA/I,cAA+JD,EAA/J,QAAP,SAAwLxC,IAK1K0C,CAAa1C,EAAM8B,GAAYa,UA5BxD,SAAoBd,GAClB,IAAMe,EAAQC,IAAOhB,EAAW,IAAIiB,OAAO,UAC3C,GAA0B,IAAtBjB,EAAWK,OACb,OAAOU,EAGP,IAAMG,EAAQF,IAAOhB,EAAW,IAAIiB,OAAO,gBAAkBD,IAAOhB,EAAW,IAAIiB,OAAO,cACtFD,IAAOhB,EAAW,IAAIiB,OAAO,UAC7BD,IAAOhB,EAAW,IAAIiB,OAAO,qBACjC,MAAM,GAAN,OAAUF,EAAV,cAAqBG,GAmB0CC,CAAWnB,MADxDA,EAAW,IAKpB,SAASoB,EAAT,GAAmC,IAC1CC,EADyC,EAAXC,QACfC,QAAO,SAACC,EAAMC,GACjC,IAAMC,EAAOV,IAAOS,EAAKzB,WAAW,IAAIiB,OAAO,cACzCU,EAAOH,EAAKA,EAAKnB,OAAO,GACxBuB,EAAOJ,EAAKK,MAAM,EAAGL,EAAKnB,OAAO,GACvC,YAAgByB,IAATH,EACH,CAAC,CAAED,OAAMK,MAAO,CAACN,KACjBE,EAAKD,OAASA,EAAd,sBACIF,GADJ,CACU,CAAEE,OAAMK,MAAO,CAACN,MAD1B,sBAEIG,GAFJ,CAEU,CAAEF,OAAMK,MAAM,GAAD,mBAAMJ,EAAKI,OAAX,CAAkBN,SAC5C,IAEG5C,EAAU1B,IAmBhB,OAAO,cAAC6E,EAAA,EAAD,CACHlD,UAAWD,EAAQvB,KACnB2E,UACE,cAACC,EAAA,EAAD,CAAeC,UAAU,MAAzB,8BAHC,SAQJd,EAAKe,KAzBR,YAAsC,IAAhBV,EAAe,EAAfA,KAAMK,EAAS,EAATA,MAC1B,OAAO,iCACL,cAACM,EAAA,EAAD,CAASF,UAAU,MAAnB,kBAAwCT,IACxC,6BACE,cAACY,EAAA,EAAD,CACExD,UAAWD,EAAQiB,iBACnBJ,MAAM,gBACN6C,QAAQ,QACR9C,QAAQ,UAJV,SAMGiC,KAPL,kBAAoBA,IAUnBK,EAAMK,IAAIrC,KAZN,eAAmB2B,S,sCC/DxBvE,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCmF,OAAQ,CACNhF,OAAQH,EAAMI,QAAQ,QAIX,SAASgF,EAAgBC,GACtC,IAAM7D,EAAU1B,IAEVwF,EAAOC,KAAK3E,KAAKW,UAAU,CAC/BiE,KAAM5E,KAAKC,MAAML,OAAOC,aAAaC,QAAQ,gBAC7CgE,MAAO9D,KAAKC,MAAML,OAAOC,aAAaC,QAAQ,oBAchD,OAAO,qCACL,cAACyB,EAAA,EAAD,CACEV,UAAWD,EAAQ2D,OACnB/C,QAAQ,YACRC,MAAM,UACNoD,UAAW,cAAC,IAAD,IACXtC,KAAI,6DAAwDmC,GAC5DI,SAAS,cANX,2BAUA,eAACvD,EAAA,EAAD,CACEV,UAAWD,EAAQ2D,OACnB/C,QAAQ,YACRC,MAAM,UACNoD,UAAW,cAAC,IAAD,IACXX,UAAU,QALZ,wBAQE,uBACExC,KAAK,OACLqD,OAAO,QACPC,QAAM,EACN3D,SAlCN,SAAaN,GACX,IAAMkE,EAAS,IAAIC,WACnBD,EAAOE,WAAWpE,EAAGO,OAAO8D,MAAM,GAAI,SACtCH,EAAOI,OAAS,SAAAC,GACd,MAAwBtF,KAAKC,MAAMqF,EAAGhE,OAAOiE,QAArCX,EAAR,EAAQA,KAAMd,EAAd,EAAcA,MACdlE,OAAOC,aAAaa,QAAQ,cAAeV,KAAKW,UAAUiE,IAC1DhF,OAAOC,aAAaa,QAAQ,eAAgBV,KAAKW,UAAUmD,IAC3DlE,OAAO4F,SAASC,mBCrBtB,IAAMvG,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,MAAO,MACPC,OAAQ,2BAkDGmG,MA9Cf,WACE,IAAM/F,EAAqBC,OAAOC,aAAaC,QAAQ,gBACjDC,EAAeJ,EACjBK,KAAKC,MAAMN,GACX,GAEJ,EAA2BS,IAAMC,SAASN,GAA1C,mBAAOO,EAAP,KAAcC,EAAd,KAEA,SAASC,EAASC,GACS,oBAAdA,IACTA,EAAWA,EAASH,IAEtBV,OAAOC,aAAaa,QAAQ,eAAgBV,KAAKW,UAAUF,IAC3DF,EAAUE,GAsBZ,IAAMG,EAAU1B,IAEhB,OACE,sBAAK2B,UAAWD,EAAQvB,KAAxB,UACE,cAACI,EAAD,CAAaC,YAvBjB,SAAqBQ,EAAMC,GACzB,IAAMwF,GAAY,IAAIC,MAAOC,UAC7BC,UAAUC,YAAYC,oBACpB,YAAiB,IAAdC,EAAa,EAAbA,OACKT,EAAW,CAAEnD,SAAU4D,EAAO5D,SAAUC,UAAW2D,EAAO3D,WAChE,OAAQnC,GACN,IAAK,UACHK,GAAS,SAAAF,GAAK,OAAM,CAAEJ,OAAM6B,WAAY,CAAC4D,GAAY3D,UAAW,CAACwD,KAAnD,mBAAmElF,OACjF,MACF,IAAK,WACHE,GAAS,iCAAEgD,EAAF,KAAWlD,EAAX,kBAAwB,CAAEJ,OAAM6B,WAAW,GAAD,mBAAMyB,EAAKzB,YAAX,CAAuB4D,IAAY3D,UAAU,GAAD,mBAAMwB,EAAKxB,WAAX,CAAsBwD,MAA5G,mBAA4HlF,WAI3I,cACA,CAAE4F,WAAY,EAAGC,oBAAoB,OASrC,cAAChD,EAAD,CAAaE,QAAS/C,IACtB,cAACkE,EAAD,QC1CS4B,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.c3f7108d.chunk.js","sourcesContent":["import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n    },\r\n    '& .MuiTextField-root': {\r\n      width: '100%',\r\n    }\r\n  },\r\n}));\r\n\r\nexport default function CheckInForm({ addLocation }) {\r\n  const initialStateString = window.localStorage.getItem('expose_form');\r\n  const initialState = initialStateString\r\n    ? JSON.parse(initialStateString)\r\n    : { name: '', mode: 'checkin' };\r\n\r\n  const [state, _setState] = React.useState(initialState);\r\n\r\n  function setState(newState) {\r\n    if (typeof(newState) === 'function') {\r\n      newState = newState(state);\r\n    }\r\n    window.localStorage.setItem('expose_form', JSON.stringify(newState));\r\n    _setState(newState);\r\n  }\r\n\r\n  function changeName(ev) {\r\n    setState(state => ({ ...state, name: ev.target.value }));\r\n  }\r\n\r\n  function checkIn(ev) {\r\n    ev.preventDefault();\r\n    addLocation(state.name, 'checkin');\r\n    setState(state => ({ ...state, mode: 'checkout' }));\r\n    return false;\r\n  }\r\n\r\n  function checkOut(ev) {\r\n    ev.preventDefault();\r\n    addLocation(state.name, 'checkout');\r\n    setState(state => ({ ...state, name: '', mode: 'checkin' }));\r\n    return false;\r\n  }\r\n\r\n  const classes = useStyles();\r\n\r\n  switch (state.mode) {\r\n    case 'checkin':\r\n      return <form className={classes.root} onSubmit={checkIn}>\r\n        <TextField\r\n          required\r\n          label=\"Location Name\"\r\n          name=\"name\"\r\n          value={state.name}\r\n          onChange={changeName}\r\n        />\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          type=\"submit\"\r\n        >\r\n          Check In\r\n        </Button>\r\n      </form>;\r\n    case 'checkout':\r\n      return <form className={classes.root} onSubmit={checkOut}>\r\n        <TextField\r\n          required\r\n          label=\"Location Name\"\r\n          name=\"name\"\r\n          value={state.name}\r\n          disabled={true}\r\n        />\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          type=\"submit\"\r\n        >\r\n          Check Out\r\n        </Button>\r\n      </form>;\r\n    default:\r\n      throw new Error(`Unknown mode ${state.mode}`);\r\n  }\r\n};","import React from 'react';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport moment from 'moment';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  dividerFullWidth: {\r\n    margin: `5px 0 0 ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\n\r\n\r\n\r\nfunction CheckInEntry({ name, timestamps, locations }) {\r\n  function timeString(timestamps) {\r\n    const time1 = moment(timestamps[0]).format('hh:mmA');\r\n    if (timestamps.length === 1) {\r\n      return time1;\r\n    }\r\n    else {\r\n      const time2 = moment(timestamps[0]).format('DD/MM/YYYY') === moment(timestamps[1]).format('DD/MM/YYYY')\r\n        ? moment(timestamps[1]).format('hh:mmA')\r\n        : moment(timestamps[1]).format('DD/MM/YYYY hh:mmA')\r\n      return `${time1} - ${time2}`;\r\n    }\r\n  }\r\n\r\n  function locationLink(name, locations) {\r\n    if (locations.length === 1) {\r\n      const { latitude, longitude } = locations[0];\r\n      return <a href={`https://www.google.com/maps/search/${latitude},${longitude}/@${latitude},${longitude},17z`}>{name}</a>;\r\n    }\r\n    else {\r\n      const [\r\n        { latitude: latitude1, longitude: longitude1 },\r\n        { latitude: latitude2, longitude: longitude2 }\r\n      ] = locations;\r\n      return <a href={`https://www.google.com/maps/dir///@${latitude2},${longitude2},17z/data=!3m1!4b1!4m10!4m9!1m3!2m2!1d${longitude1}!2d${latitude1}!1m3!2m2!1d${longitude2}!2d${latitude2}!3e2`}>{name}</a>;\r\n    }\r\n  }\r\n\r\n  return <ListItem key={timestamps[0]}>\r\n    <ListItemText primary={locationLink(name, locations)} secondary={timeString(timestamps)} />\r\n  </ListItem>\r\n};\r\n\r\nexport default function HistoryList({ history }) {\r\n  const days = history.reduce((full, curr) => {\r\n    const date = moment(curr.timestamps[0]).format('DD/MM/YYYY');\r\n    const prev = full[full.length-1];\r\n    const rest = full.slice(0, full.length-1);\r\n    return prev === undefined\r\n      ? [{ date, items: [curr] }]\r\n      : prev.date !== date\r\n      ? [...full, { date, items: [curr] }]\r\n      : [...rest, { date, items: [...prev.items, curr] }];\r\n  }, []);\r\n\r\n  const classes = useStyles();\r\n\r\n  function CheckInDay({ date, items }) {\r\n    return <span key={`span-${date}`}>\r\n      <Divider component=\"li\" key={`divider-${date}`} />\r\n      <li key={`subhead-${date}`}>\r\n        <Typography\r\n          className={classes.dividerFullWidth}\r\n          color=\"textSecondary\"\r\n          display=\"block\"\r\n          variant=\"caption\"\r\n        >\r\n          {date}\r\n        </Typography>\r\n      </li>\r\n      {items.map(CheckInEntry)}\r\n    </span>;\r\n  };\r\n\r\n  return <List\r\n      className={classes.root}\r\n      subheader={\r\n        <ListSubheader component=\"div\">\r\n          Location History\r\n        </ListSubheader>\r\n      }\r\n    >\r\n    {days.map(CheckInDay)}\r\n  </List>;\r\n};","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport DownloadIcon from '@material-ui/icons/CloudDownload';\r\nimport UploadIcon from '@material-ui/icons/CloudUpload';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  button: {\r\n    margin: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nexport default function StateManagement(props) {\r\n  const classes = useStyles();\r\n\r\n  const data = btoa(JSON.stringify({\r\n    form: JSON.parse(window.localStorage.getItem('expose_form')),\r\n    items: JSON.parse(window.localStorage.getItem('expose_items')),\r\n  }));\r\n\r\n  function foo(ev) {\r\n    const reader = new FileReader();\r\n    reader.readAsText(ev.target.files[0], 'utf-8');\r\n    reader.onload = re => {\r\n      const { form, items } = JSON.parse(re.target.result);\r\n      window.localStorage.setItem('expose_form', JSON.stringify(form));\r\n      window.localStorage.setItem('expose_items', JSON.stringify(items));\r\n      window.location.reload();\r\n    };\r\n  }\r\n\r\n  return <>\r\n    <Button\r\n      className={classes.button}\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      startIcon={<DownloadIcon />}\r\n      href={`data:application/octet-stream;charset=utf-8;base64,${data}`}\r\n      download=\"expose.json\"\r\n    >\r\n      Download Data\r\n    </Button>\r\n    <Button\r\n      className={classes.button}\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      startIcon={<UploadIcon />}\r\n      component=\"label\"\r\n    >\r\n      Upload Data\r\n      <input\r\n        type=\"file\"\r\n        accept=\".json\"\r\n        hidden\r\n        onChange={foo}\r\n      />\r\n    </Button>\r\n  </>;\r\n};","import React from 'react';\nimport CheckInForm from './CheckInForm';\nimport HistoryList from './HistoryList';\nimport StateManagement from './StateManagement';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '90%',\n    margin: '10px auto 10px auto',\n  },\n}));\n\nfunction App() {\n  const initialStateString = window.localStorage.getItem('expose_items');\n  const initialState = initialStateString\n    ? JSON.parse(initialStateString)\n    : [];\n\n  const [state, _setState] = React.useState(initialState);\n\n  function setState(newState) {\n    if (typeof(newState) === 'function') {\n      newState = newState(state);\n    }\n    window.localStorage.setItem('expose_items', JSON.stringify(newState));\n    _setState(newState);\n  }\n\n  function addLocation(name, mode) {\n    const timestamp = new Date().getTime();\n    navigator.geolocation.getCurrentPosition(\n      ({ coords }) => {\n        const location = { latitude: coords.latitude, longitude: coords.longitude };\n        switch (mode) {\n          case 'checkin':\n            setState(state => [ { name, timestamps: [timestamp], locations: [location] }, ...state ]);\n            break;\n          case 'checkout':\n            setState(([curr, ...state]) => [ { name, timestamps: [...curr.timestamps, timestamp], locations: [...curr.locations, location] }, ...state ]);\n            break;\n        }\n      },\n      () => {},\n      { maximumAge: 0, enableHighAccuracy: true }\n    );\n  };\n\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <CheckInForm addLocation={addLocation} />\n      <HistoryList history={state} />\n      <StateManagement />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}